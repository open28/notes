### 线段树 segment tree

* 先从一个实例出发
  * 假设我们有一个数组array[0.n-1],里面有n个元素现在我们要经常对这个数组作两件事。
    * 更新数组元素的值
    * 求数组任意一段区间里元素的总和（或者平均值）
  * 方法一 遍历数组
    * 时间复杂度O(n)
  * 方法二 线段树
    * 时间复杂度O（logn）
* 什么是线段树
  * 一种按照二叉树的形式存储数据的结构，每个节点保存的都是数组里某一段的总和
* 例如数组是[1,3,5,7,9,11]
  * ![image-20220506213221899](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20220506213221899.png)
  * leetcode315计算右侧小于当前元素的个数
  * ![image-20220506214109224](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20220506214109224.png)

### 树状数组

* 先从一个例题出发
  * 假设我们用一个数组array[0...n-1],里面有n个元素，现在我们要经常对这个数组做两件事情：
    * 更新数组元素
    * 求数组前K个元素的总和（或者平均值）
  * 方法一：线段树
    * 时间复杂度：O（logn）
  * 方法二：树状数组（比线段树更简单）
    * 时间复杂度：O（logn）

* 重要的基本特征
  * 利用数组来表示多叉树的结构，和优先队列有些类似
  * 优先队列是用数组元素来表示完全二叉树，而树状数组是多叉树。
  * 树状数组的第一个元素是空节点。
  * 如果节点tree(y) 是tree(x)的父节点，那么需要满足y = x - (x&(-x))
* 拓展练习
  * leetcode308 二维区域和检索-可变
  * 求一个动态变化的二维矩阵里，任意子矩阵里的数的总和

**本节课总结**

* 优先队列：常见的面试考点，实现过程比较繁琐，在解决面试中的问题时，实行拿来主义即可
* 图：被广泛运用的数据结构。如大数据问题都得用图论
  * 在社交网络里，每个人可以用图的定点表示，人与人之间的关系可以用图的边表示
  * 在地图上要了解从起始点到目的地，如何行驶会更快捷，需要用到图论里的最短路径算法
* 前缀树：出现在面试的难题中，要求能熟练的书写他的实现已经应用
* 线段树和树状数组
  * 应用场合比较明确
  * 如果要求在一副图片当中修改像素的颜色，求解任意矩形区间的灰度平均值，则需要采用二维的线段树。